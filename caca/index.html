<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dedsec</title>
	<link rel="icon" type="imagem/png" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQYzRcRn9KDV-PKSBYaZTxxeLx6ZGAfDkNP0A&usqp=CAU" />
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<div id="iniciar">
		<div class="logo"">
			<img src=" https://i.pinimg.com/originals/d6/65/88/d66588fe757818e5cd25a0f82b5547b6.gif" alt="">
		</div>
		<div class="column">
			<h3 class="texto">Você está preparado para se tornar um membro do DedSec?</h3>
			<button id="btnPlay">Sim!</button>
		</div>
	</div>
	<div id="jogo" hidden>
		<div class="card-row">
		<div class="card">
			<div class="cards">
				<div class="card">
					<div class="flipinner">
						<div class="frontcard">
							<h3>Microprocessador que é considerado o "cérebro" do computador?</h3>
						</div>

						<div class="backcard">
							<h3>CPU</h3>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="card">
			<div class="cards">
				<div class="card">
					<div class="flipinner">
						<div class="frontcard">
							<h3>Circuito responsável pelas somas, subtrações e funções lógicas do sistema?</h3>
						</div>

						<div class="backcard">
							<h3>ULA</h3>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="card">
			<div class="cards">
				<div class="card">
					<div class="flipinner">
						<div class="frontcard">
							<h3>Circuitos que armazenam informações temporarias para a CPU?</h3>
						</div>

						<div class="backcard">
							<h3>Registradores</h3>
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>
		<div class="card-row-1">
			<div class="card">
				<div class="cards">
					<div class="card">
						<div class="flipinner">
							<div class="frontcard">
								<h3>Memoria responsável para a execução de aplicativos, ajudando a CPU</h3>
							</div>
	
							<div class="backcard">
								<h3>RAM</h3>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="card">
				<div class="cards">
					<div class="card">
						<div class="flipinner">
							<div class="frontcard">
								<h3>Tecnologia que possibilita a comunicação direta com as memórias ?</h3>
							</div>
	
							<div class="backcard">
								<h3>DMA</h3>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="card">
				<div class="cards">
					<div class="card">
						<div class="flipinner">
							<div class="frontcard">
								<h3>Está presente no Aruduino UNO, não volátil, uma memoria Rom</h3>
							</div>
	
							<div class="backcard">
								<h3>EPROM</h3>
							</div>
						</div>
					</div>
				</div>
			</div>
			</div>
		
		<h2 hidden id="parabens">Seja bem vindo ao Dedsec!!!</h2>
		<div hidden id="btnVoltar"><img src="https://media4.giphy.com/media/l3q2BAs9N0IItUKA0/giphy.gif" alt=""></div>
		<p id="encontradas"></p>
		<table id="tabuleiro" align="center">
			<tr>
				<td>R</td>
				<td>E</td>
				<td>G</td>
				<td>I</td>
				<td>S</td>
				<td>T</td>
				<td>R</td>
				<td>A</td>
				<td>D</td>
				<td>O</td>
				<td>R</td>
				<td>E</td>
				<td>S</td>
				<td>A</td>
				<td>J</td>
				<td>A</td>
				<td>L</td>
				<td>E</td>
				<td>K</td>
				<td>O</td>
				<td>G</td>
				<td>P</td>
			</tr>
			<tr>
				<td>R</td>
				<td>O</td>
				<td>A</td>
				<td>M</td>
				<td>A</td>
				<td>R</td>
				<td>E</td>
				<td>L</td>
				<td>O</td>
				<td>U</td>
				<td>P</td>
				<td>R</td>
				<td>O</td>
				<td>A</td>
				<td>M</td>
				<td>A</td>
				<td>R</td>
				<td>E</td>
				<td>L</td>
				<td>O</td>
				<td>G</td>
				<td>P</td>
			</tr>
			<tr>
				<td>E</td>
				<td>C</td>
				<td>V</td>
				<td>E</td>
				<td>P</td>
				<td>R</td>
				<td>O</td>
				<td>M</td>
				<td>H</td>
				<td>Y</td>
				<td>R</td>
				<td>E</td>
				<td>C</td>
				<td>V</td>
				<td>E</td>
				<td>D</td>
				<td>O</td>
				<td>M</td>
				<td>A</td>
				<td>H</td>
				<td>Y</td>
				<td>R</td>
			</tr>
			<tr>
				<td>G</td>
				<td>R</td>
				<td>I</td>
				<td>J</td>
				<td>I</td>
				<td>V</td>
				<td>E</td>
				<td>R</td>
				<td>D</td>
				<td>E</td>
				<td>F</td>
				<td>G</td>
				<td>R</td>
				<td>I</td>
				<td>J</td>
				<td>I</td>
				<td>U</td>
				<td>T</td>
				<td>H</td>
				<td>M</td>
				<td>D</td>
				<td>F</td>
			</tr>
			<tr>
				<td>I</td>
				<td>B</td>
				<td>O</td>
				<td>L</td>
				<td>Y</td>
				<td>H</td>
				<td>N</td>
				<td>A</td>
				<td>I</td>
				<td>U</td>
				<td>E</td>
				<td>I</td>
				<td>R</td>
				<td>A</td>
				<td>M</td>
				<td>Y</td>
				<td>L</td>
				<td>N</td>
				<td>A</td>
				<td>I</td>
				<td>U</td>
				<td>E</td>
			</tr>
			<tr>
				<td>S</td>
				<td>N</td>
				<td>L</td>
				<td>R</td>
				<td>A</td>
				<td>H</td>
				<td>F</td>
				<td>N</td>
				<td>E</td>
				<td>D</td>
				<td>R</td>
				<td>S</td>
				<td>N</td>
				<td>L</td>
				<td>R</td>
				<td>A</td>
				<td>A</td>
				<td>F</td>
				<td>N</td>
				<td>E</td>
				<td>O</td>
				<td>R</td>
			</tr>
			<tr>
				<td>T</td>
				<td>M</td>
				<td>E</td>
				<td>K</td>
				<td>C</td>
				<td>F</td>
				<td>N</td>
				<td>J</td>
				<td>A</td>
				<td>M</td>
				<td>Q</td>
				<td>T</td>
				<td>M</td>
				<td>E</td>
				<td>K</td>
				<td>C</td>
				<td>F</td>
				<td>N</td>
				<td>J</td>
				<td>A</td>
				<td>N</td>
				<td>Q</td>
			</tr>
			<tr>
				<td>R</td>
				<td>S</td>
				<td>T</td>
				<td>I</td>
				<td>R</td>
				<td>E</td>
				<td>B</td>
				<td>A</td>
				<td>U</td>
				<td>A</td>
				<td>F</td>
				<td>R</td>
				<td>S</td>
				<td>T</td>
				<td>I</td>
				<td>R</td>
				<td>E</td>
				<td>B</td>
				<td>A</td>
				<td>U</td>
				<td>S</td>
				<td>F</td>
			</tr>
			<tr>
				<td>A</td>
				<td>D</td>
				<td>A</td>
				<td>L</td>
				<td>E</td>
				<td>R</td>
				<td>A</td>
				<td>B</td>
				<td>N</td>
				<td>P</td>
				<td>J</td>
				<td>A</td>
				<td>R</td>
				<td>A</td>
				<td>Y</td>
				<td>E</td>
				<td>U</td>
				<td>M</td>
				<td>O</td>
				<td>C</td>
				<td>P</td>
				<td>U</td>
			</tr>
		</table>
	</div>
	<script>
		var t = document.getElementById("tabuleiro");
		var resposta, primeiroclique, encontradas, data;
		function clique(e) {
			if (resposta.length > 0) {
				if (primeiroclique == false) {
					data.colunainicial = parseInt(e.target.dataset.index);
					data.linhainicial = parseInt(e.target.parentElement.dataset.index);
					data.letrainicial = e.target.innerText;

					if (e.target.dataset.encontrada == "true") {
						e.target.classList.replace("encontrada", "selecionada");
					} else {
						e.target.classList.add("selecionada");
					}

					primeiroclique = true;
				} else {
					if (data.colunainicial != parseInt(e.target.dataset.index) && data.linhainicial != parseInt(e.target.parentElement.dataset.index)) {
						return;
					}

					data.colunafinal = parseInt(e.target.dataset.index);
					data.linhafinal = parseInt(e.target.parentElement.dataset.index); //parentelement: returns the parents elementof the specified element
					data.letrafinal = e.target.innerText; //target: padrão self: possibilita clicar e selecionar no caça palavras

					if (data.colunainicial > data.colunafinal) {
						var novacolunainicial = data.colunafinal;
						var novacolunafinal = data.colunainicial;
						data.colunainicial = novacolunainicial;
						data.colunafinal = novacolunafinal;
					}
					if (data.linhainicial > data.linhafinal) {
						var novalinhainicial = data.linhafinal;
						var novalinhafinal = data.linhainicial;
						data.linhainicial = novalinhainicial;
						data.linhafinal = novalinhafinal;
					}

					primeiroclique = false;

					if (e.target.dataset.encontrada == "true") {
						e.target.classList.replace("encontrada", "selecionada");
					} else {
						e.target.classList.add("selecionada");
					}
					comparar(data);
				}
			}
		}
		function horizontal(fn) {
			console.log("seleção horizontal");
			for (var i = data.colunainicial; i < data.colunafinal + 1; i++) {
				var td = t.rows[data.linhainicial].cells[i];
				if (td.dataset.encontrada == "true") {
					td.classList.replace("encontrada", "selecionada");
				} else {
					td.classList.add("selecionada");
				}
				fn(td);
			}
		}
		function vertical(fn) {
			console.log("seleção vertical");
			for (var i = data.linhainicial; i < data.linhafinal + 1; i++) {
				var td = t.rows[i].cells[data.colunainicial];
				if (td.dataset.encontrada == "true") {
					td.classList.replace("encontrada", "selecionada");
				} else {
					td.classList.add("selecionada");
				}
				fn(td);
			}
		}
		function comparar(data) {
			var selecionados = {
				palavra: "",
				elementos: []
			};
			if (data.colunainicial != data.colunafinal && data.linhainicial == data.linhafinal) {
				horizontal(function (td) {
					selecionados.palavra += td.innerText;
					selecionados.elementos.push(td);
				});
			} else if (data.colunainicial == data.colunafinal && data.linhainicial != data.linhafinal) {
				vertical(function (td) {
					selecionados.palavra += td.innerText;
					selecionados.elementos.push(td);
				});
			}
			if (resposta.includes(selecionados.palavra)) {
				resposta = resposta.filter(function (p) {
					if (selecionados.palavra != p) {
						return p;
					}
				});
				setTimeout(function () {
					for (var i = 0; i < selecionados.elementos.length; i++) {
						var elemento = selecionados.elementos[i];
						elemento.classList.replace("selecionada", "encontrada");
						elemento.dataset.encontrada = "true";
					}
				}, 1000);
				encontradas += 1;
				document.getElementById("encontradas").innerText = "Encontradas: " + encontradas + "\n Restantes: " + resposta.length;
				if (resposta.length == 0) {
					setTimeout(function () {
						document.getElementById("parabens").hidden = false;
						document.getElementById("btnVoltar").hidden = false;
					}, 2000);
				}
				data = {};
			} else {
				data = {};
				setTimeout(function () {
					for (var i = 0; i < selecionados.elementos.length; i++) {
						var elemento = selecionados.elementos[i];
						elemento.classList.replace("selecionada", "errado");
					}
					setTimeout(function () {
						for (var i = 0; i < selecionados.elementos.length; i++) {
							var elemento = selecionados.elementos[i];
							if (elemento.dataset.encontrada == "true") {
								elemento.classList.replace("errado", "encontrada");
							} else {
								elemento.classList.remove("errado");
							}
						}
					}, 1000);
				}, 1000);
			}
		}
		function iniciaJogo() {
			resposta = ["CPU", "RAM", "EPROM", "REGISTRADORES", "ULA", "DMA"];
			primeiroclique = false;
			encontradas = 0;
			data = {};
			document.getElementById("encontradas").innerText = "Encontradas: " + encontradas + "\n Restantes: " + resposta.length;
			for (var i = 0; i < t.rows.length; i++) {
				t.rows[i].id = "linha " + i;
				t.rows[i].dataset.index = i;
				for (var j = 0; j < t.rows[i].cells.length; j++) {
					t.rows[i].cells[j].classList = [];
					t.rows[i].cells[j].dataset.encontrada = "false";
					t.rows[i].cells[j].id = "coluna " + j;
					t.rows[i].cells[j].dataset.index = j;
					t.rows[i].cells[j].addEventListener("click", clique);
				}
			}
			document.getElementById("iniciar").hidden = true;
			document.getElementById("parabens").hidden = true;
			document.getElementById("jogo").hidden = false;
			document.getElementById("btnVoltar").hidden = true;
		}
		var btnPlay = document.getElementById("btnPlay");
		btnPlay.onclick = function () {
			iniciaJogo();
		}

	</script>
</body>

</html>